import{X as v}from"./framework.n6hqIsqL.js";function _(u={}){const{immediate:g=!1,onNeedRefresh:r,onOfflineReady:i,onRegistered:o,onRegisteredSW:d,onRegisterError:n}=u;let e,c,s;const w=async(p=!0)=>{await c,await(s==null?void 0:s())};async function m(){if("serviceWorker"in navigator){const{Workbox:p}=await v(async()=>{const{Workbox:t}=await import("./workbox-window.prod.es5.B_6ZJHoI.js");return{Workbox:t}},[]);e=new p("/vue3-baidu-map-gl/sw.js",{scope:"/vue3-baidu-map-gl/",type:"classic"}),s=async()=>{await(e==null?void 0:e.messageSkipWaiting())};{let t=!1;const l=()=>{t=!0,e==null||e.addEventListener("controlling",a=>{a.isUpdate&&window.location.reload()}),r==null||r()};e.addEventListener("installed",a=>{typeof a.isUpdate>"u"?typeof a.isExternal<"u"?a.isExternal?l():!t&&(i==null||i()):a.isExternal?window.location.reload():!t&&(i==null||i()):a.isUpdate||i==null||i()}),e.addEventListener("waiting",l),e.addEventListener("externalwaiting",l)}e.register({immediate:g}).then(t=>{d?d("/vue3-baidu-map-gl/sw.js",t):o==null||o(t)}).catch(t=>{n==null||n(t)})}}return c=m(),w}export{_ as registerSW};
